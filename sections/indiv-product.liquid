{%- assign product = all_products[section.settings.featured_product] -%}
{%- assign current_variant = product.selected_or_first_available_variant -%}

<div class="homepage-sections-wrapper homepage-sections-wrapper--white">

<div class="wrapper show-on-scroll product-single" data-section-id="{{ section.id }}">

{% if section.settings.title != blank %}
  <div class="grid">
  <div class="grid__item large--five-sixths push--large--one-twelfth homepage-featured-rich-text">
    <div class="sitewide--title-wrapper">
      <h2 class="homepage-sections--title">{{ section.settings.title | escape }}</h2>
    </div>
  </div>
</div>
{% endif %}

{% if section.settings.richtext != '' %}
<div class="grid">
  <div class="grid__item large--one-half push--large--one-quarter">
    <div class="homepage-sections--description">{{ section.settings.richtext }}</div>
  </div>
</div>
{% endif %}

<div class="grid" id="product-box" data-section-id="{{ section.id }}">

{% if section.settings.image-placement == 'left' %}
<div class="grid__item large--one-half product-images">

    {% if product.empty? %}
      <div class="homepage-sections--indiv-product-slider">
        <ul class="slides">
          <li>
            {{ 'product-1' | append: current | placeholder_svg_tag: 'icon icon--placeholder' }}
          </li>
        </ul>
      </div>
    {% else %}
      <div class="homepage-sections--indiv-product-slider">
        <ul class="slides">
          {% assign featured_image = current_variant.featured_image | default: product.featured_image %}
          <li>
            {% capture props %}data-image-id="{{ featured_image.id }}" id="ProductPhotoImg"{% endcapture %}
            {% include 'responsive-image' with featured_image, alt: featured_image.alt, props: props %}
          </li>
          {% for image in product.images %}
            {% unless image contains featured_image %}
              <li>
                {% capture props %}data-image-id="{{ image.id }}"{% endcapture %}
                {% include 'responsive-image' with image, alt: image.alt, props: props %}
              </li>
            {% endunless %}
          {% endfor %}
        </ul>
      </div>
    {% endif %}

</div>
{% endif %}

<div class="grid__item large--one-half">

<div class="product-page--sale-badge{% unless product.compare_at_price_max > current_variant.price %} hide{% endunless %}">{{ 'products.product.on_sale' | t }}</div>

    <section class="product-details-wrapper">

      <div class="product-details--form-wrapper{% unless section.settings.show_product_description %} product-details--form-wrapper--no-description{% endunless %}">

    {% if section.settings.show-vendor %}
      <div class="indiv-product-vendor-text">{{ product.vendor }}</div>
    {% endif %}

    {% if product.empty? %}
      <h1 class="product-details-product-title">{{ 'general.onboarding.product_title' | t }}</h1>
    {% else %}
      <a href="{{ product.url | within: collection }}">
        <h1 class="product-details-product-title">{{ product.title }}</h1>
      </a>
    {% endif %}

    {% if section.settings.show_reviews %}
      <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
    {% endif %}

      {% unless product.empty? %}

          {% if product.available %}

          <div class="form-vertical">
          {% form 'product', product, id: "AddToCartForm" %}

          <p id="ComparePrice">
            {% if current_variant.compare_at_price > current_variant.price %}
              <span class="money">{{ current_variant.compare_at_price | money }}</span>
            {% endif %}
          </p>
          <span class="h2 js" id="ProductPrice"><span class="money">{{ current_variant.price | money }}</span></span>



            <div class="row homepage-sections--indiv-product-slider-variants">

              {% if product.variants.size > 1  %}
                {% for option in product.options_with_values %}
                  <div class="selector-wrapper col-md-6 col-sm-12 col-xs-12">
                    <label for="SingleOptionSelector-{{ forloop.index0 }}">{{ option.name }}</label>
                    <select class="form-control" id="SingleOptionSelector-{{ forloop.index0 }}">
                        {% for value in option.values %}
                          <option {% if option.selected_value == value %}selected{% endif %}>{{ value }}</option>
                        {% endfor %}
                    </select>
                  </div>
                {% endfor %}
              {% endif %}

              <select name="id" id="ProductSelect-{{ section.id }}" data-section="{{ section.id }}" class="form-control original-select product-form__variants no-js">
                {% for variant in product.variants %}
                  {% if variant.available %}
                    <option {% if variant == current_variant %} selected="selected" {% endif %} value="{{ variant.id }}">
                      {{ variant.title }} - <span class="money">{{ variant.price | money }}</span>
                    </option>
                  {% else %}
                    <option disabled="disabled">{{ variant.title }} - {{ 'products.product.sold_out' | t }}</option>
                  {% endif %}
                {% endfor %}
              </select>

              {% if section.settings.show_quantity_selector %}
                <div class="selector-wrapper col-md-6 col-sm-12 col-xs-12">
                  <label for="Quantity">{{ 'products.product.quantity' | t }}</label>
                  <input type="number" id="Quantity" name="quantity" value="1" min="1" class="quantity-selector">
                </div>
              {% endif %}

              <div class="paymentButtonsWrapper">
                <button type="submit" name="add" id="AddToCart" class="btn{% if section.settings.show_smart_checkout %} add-to-cart--secondary{% endif %}"
                       data-use-ajax="{% if section.settings.open_cart_when_added %}false{% else %}true{% endif %}">
                    <span id="AddToCartText">{{ 'products.product.add_to_cart' | t }}</span>
                </button>
                {% if section.settings.show_smart_checkout %}
                  {{ form | payment_button }}
                {% endif %}
              </div>

              </div>

          {% endform %}
          </div>


          {% else %}

          <div>

            <div class="product-out-of-stock"><h4>{{ 'products.product.sold_out' | t }}</h4></div>

          </div>

          {% endif %}

        {% else %}


                  {% if section.settings.show_reviews %}
                          <span class="spr-badge" id="spr_badge_7826197321" data-rating="5.0">

                  <span class="spr-starrating spr-badge-starrating"><i class="spr-icon spr-icon-star" style=""></i><i class="spr-icon spr-icon-star" style=""></i><i class="spr-icon spr-icon-star" style=""></i><i class="spr-icon spr-icon-star" style=""></i><i class="spr-icon spr-icon-star" style=""></i></span>


                  <span class="spr-badge-caption">

                  1 review

                  </span>
                  </span>
                  {% endif %}

          <span id="ProductPrice" class="h2 custom-font"><span class="money">$16.99</span></span>

          <div class="onboarding--sold-out">
            <a class="btn btn-success custom-font">
                {{ 'products.product.sold_out' | t }}
            </a>
          </div>
        {% endunless %}

      </div>

          {% if section.settings.show_product_description %}
            <div class="product-description rte">
              {% unless product.empty? %}
                <div class="smart-tabs-wrapper">{% include 'bs-tabs' %}</div>
              {% else %}
                {{ 'general.onboarding.product_description' | t }}
              {% endunless %}
            </div>
          {% endif %}

        </div>

        {% if section.settings.image-placement == 'right' %}
        <div class="grid__item large--one-half product-images">

            {% if product.empty? %}
              <div class="homepage-sections--indiv-product-slider">
                <ul class="slides">
                  <li>
                    {{ 'product-1' | append: current | placeholder_svg_tag: 'icon icon--placeholder' }}
                  </li>
                </ul>
              </div>
            {% else %}
              <div class="homepage-sections--indiv-product-slider">
                <ul class="slides">
                  {% assign featured_image = current_variant.featured_image | default: product.featured_image %}
                  <li>
                    {% capture props %}data-image-id="{{ featured_image.id }}" id="ProductPhotoImg"{% endcapture %}
                    {% include 'responsive-image' with featured_image, alt: featured_image.alt, props: props %}
                  </li>
                  {% for image in product.images %}
                    {% unless image contains featured_image %}
                      <li>
                        {% capture props %}data-image-id="{{ image.id }}"{% endcapture %}
                        {% include 'responsive-image' with image, alt: image.alt, props: props %}
                      </li>
                    {% endunless %}
                  {% endfor %}
                </ul>
              </div>
            {% endif %}

        </div>
        {% endif %}

</div>

</section>

</div>

</div>

{% unless product.empty? %}
<script type="application/json" id="ProductJson-{{ section.id }}">
  {{ product | json }}
  
</script>
{% endunless %}

{% schema %}
{
"name": "Featured product",
"class": "homepage-section--indiv-product-wrapper",
"settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "Featured product"
      },
      {
        "type": "richtext",
        "id": "richtext",
        "label": "Description",
        "info": "Optional"
      },
      {
        "type": "product",
        "id": "featured_product",
        "label": "Product"
      },
      {
        "type": "select",
        "id": "image-placement",
        "label": "Image placement",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "left"
      },
      {
        "type": "checkbox",
        "id": "open_cart_when_added",
        "label": "Open cart page when item is added",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "show-vendor",
        "label": "Show vendor",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "show_product_description",
        "label": "Show product description",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "show_quantity_selector",
        "label": "Show quantity selector",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "show_smart_checkout",
        "label": "Show dynamic checkout button",
        "default": false,
        "info": "Lets customers check out directly using a familiar payment method. [Learn more](https://help.shopify.com/manual/using-themes/change-the-layout/dynamic-checkout)"
      },
    	{
    		"type": "header",
    		"content": "Reviews"
    	},
    	{
    		"type": "checkbox",
    		"id": "show_reviews",
    		"label": "Enable",
    		"default": false
    	},
    	{
    		"type": "paragraph",
    		"content": "You will need to install Shopify's [Product Reviews app](https://apps.shopify.com/product-reviews) before enabling this option."
    	}
  ],
"presets": [
  {
    "name": "Featured product",
    "category": "Products"
  }
]
}
{% endschema %}

<style>
  */
   Swatches Styles
*/

{% assign width = '50px' %}
{% assign height = '35px' %}
.swatch { 
  margin:1em 0; 
}
/* Label */
.swatch .header {
  margin: 0.5em 0;
}
/* Hide radio buttons.*/
.swatch input { 
  display:none;
}
.swatch label {
  /* Rounded corners */
  -webkit-border-radius:2px;
  -moz-border-radius:2px;
  border-radius:2px;
  /* To give width and height */
  float:left;
  /* Color swatches contain no text so they need to have a width. */
  min-width:{{ width }} !important; 
  height:{{ height }} !important;
  /* No extra spacing between them */
  margin:0;
  /* The border when the button is not selected */
  border:#ccc 1px solid;
  /* Background color */
  background-color:#ddd;
  /* Styling text */
  font-size:13px;
  text-align:center;
  line-height:{{ height }};
  white-space:nowrap;
  text-transform:uppercase;
}
.swatch-element label { padding:0 10px; }
.color.swatch-element label { padding:0; }
/* Styling selected swatch */
/* Slightly raised */
.swatch input:checked + label {
  -webkit-box-shadow:0px 1px 2px rgba(0,0,0,0.8);
  -moz-box-shadow:0px 1px 2px rgba(0,0,0,0.8);
  box-shadow:0px 1px 2px rgba(0,0,0,0.8);
  border-color:transparent;
} 
.swatch .swatch-element {
  float:left;
  -webkit-transform:translateZ(0); /* webkit flicker fix */
  -webkit-font-smoothing:antialiased; /* webkit text rendering fix */
  /* Spacing between buttons */
  margin:0px 10px 10px 0;
  /* To position the sold out graphic and tooltip */
  position:relative;
}
/* Image with the cross in it */
.crossed-out { position:absolute; width:100%; height:100%; left:0; top:0; }
.swatch .swatch-element .crossed-out { display:none; }
.swatch .swatch-element.soldout .crossed-out { display:block; }
.swatch .swatch-element.soldout label {
  filter: alpha(opacity=60); /* internet explorer */
  -khtml-opacity: 0.6;      /* khtml, old safari */
  -moz-opacity: 0.6;       /* mozilla, netscape */
  opacity: 0.6;           /* fx, safari, opera */
}
/* Tooltips */
.swatch .tooltip {
  text-align:center;
  background:gray;
  color:#fff;
  bottom:100%;
  padding: 10px;
  display:block;
  position:absolute;
  width:100px;
  left:{{ width | remove: 'px' | to_number | divided_by: 2 | minus: 50 | plus: 2 }}px;
  margin-bottom:15px;
  /* Make it invisible by default */
  filter:alpha(opacity=0);
  -khtml-opacity: 0;
  -moz-opacity: 0;
  opacity:0;
  visibility:hidden;
  /* Animations */
  -webkit-transform: translateY(10px);
     -moz-transform: translateY(10px);
      -ms-transform: translateY(10px);
       -o-transform: translateY(10px);
          transform: translateY(10px);
  -webkit-transition: all .25s ease-out;
     -moz-transition: all .25s ease-out;
      -ms-transition: all .25s ease-out;
       -o-transition: all .25s ease-out;
          transition: all .25s ease-out;
  -webkit-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
     -moz-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
      -ms-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
       -o-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
          box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
  z-index: 10000;
  -moz-box-sizing:border-box; 
  -webkit-box-sizing:border-box; 
  box-sizing:border-box;
}
.swatch .tooltip:before {
  bottom:-20px;
  content:" ";
  display:block;
  height:20px;
  left:0;
  position:absolute;
  width:100%;
}
/* CSS triangle */
.swatch .tooltip:after {
  border-left:solid transparent 10px;
  border-right:solid transparent 10px;
  border-top:solid gray 10px;
  bottom:-10px;
  content:" ";
  height:0;
  left:50%;
  margin-left:-13px;
  position:absolute;
  width:0;
}
.swatch .swatch-element:hover .tooltip {
  filter:alpha(opacity=100);
  -khtml-opacity:1;
  -moz-opacity:1;
  opacity:1;
  visibility:visible;
  -webkit-transform:translateY(0px);
     -moz-transform:translateY(0px);
      -ms-transform:translateY(0px);
       -o-transform:translateY(0px);
          transform:translateY(0px);
}
.swatch.error {
  background-color:#E8D2D2!important;
  color:#333!important;
  padding:1em;
  border-radius:5px;
}
.swatch.error p {
  margin:0.7em 0;
}
.swatch.error p:first-child {
  margin-top:0;
}
.swatch.error p:last-child {
  margin-bottom:0;
}
.swatch.error code {
  font-family:monospace;
}
</style>